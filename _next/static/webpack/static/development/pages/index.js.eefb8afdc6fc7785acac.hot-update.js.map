{"version":3,"file":"static/webpack/static/development/pages/index.js.eefb8afdc6fc7785acac.hot-update.js","sources":["webpack:///./src/Components/Video/index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport videojs from \"video.js\";\n// Styles\nimport \"video.js/dist/video-js.css\";\n\nimport { IVideo } from \"./Video\";\n\nconst Container = styled.video`\n    position: absolute;\n    bottom: 50px;\n    right: 50px;\n    width: 240px;\n    height: 300px;\n`;\n\nexport const Video: React.FunctionComponent<IVideo.IProps> = props => {\n    const videoRef = useRef(null);\n    const [requireRedraw, setRequireRedraw] = useState(false);\n\n    useEffect(() => {\n        const videoNode = videoRef.current;\n        let player: videojs.Player;\n        if (!requireRedraw) {\n            player = videojs(\n                videoNode,\n                {\n                    autoplay: true,\n                    controls: true,\n                    sources: [\n                        {\n                            src: props.videoUrl,\n                        },\n                    ],\n                },\n                function onPlayerReady() {\n                    console.log(\"onPlayerReady\");\n                }\n            );\n        }\n        return () => {\n            if (!player) {\n                return;\n            }\n\n            // Video.js has a player.dispose() function that is meant to cleanup a previous video\n            // We can't use this because it does some weird stuff to remove the video element from the page\n            // This makes it really hard to use because the ref we keep still thinks it's on the page\n            // requireRedraw just makes it so the video component is removed from the page _by react_\n            // Then it's set to false immediately after so we can re-mount a new player\n            setRequireRedraw(true);\n        };\n    }, [props.videoUrl, setRequireRedraw, requireRedraw]);\n\n    useEffect(() => {\n        if (requireRedraw) {\n            setRequireRedraw(false);\n        }\n    }, [requireRedraw]);\n\n    return (\n        <div data-vjs-player>\n            {!requireRedraw && (\n                <Container ref={videoRef} className=\"video-js\">\n                    <div className=\"c-player__controls\">\n                        <button>Play</button>\n                        <button>Pause</button>\n                    </div>\n                </Container>\n            )}\n        </div>\n    );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAIA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AAGA;AACA;AACA;AAEA;AADA;AAJA;AAUA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;A","sourceRoot":""}